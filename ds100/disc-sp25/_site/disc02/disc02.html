<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Discussion 2: Pandas Practice – disc-sp25</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-ddd961a2510921635943dfbbd19534c4.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">disc-sp25</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">About</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#problem-1" id="toc-problem-1" class="nav-link active" data-scroll-target="#problem-1">Problem 1</a></li>
  <li><a href="#problem-2" id="toc-problem-2" class="nav-link" data-scroll-target="#problem-2">Problem 2</a></li>
  <li><a href="#problem-3" id="toc-problem-3" class="nav-link" data-scroll-target="#problem-3">Problem 3</a></li>
  <li><a href="#problem-4" id="toc-problem-4" class="nav-link" data-scroll-target="#problem-4">Problem 4</a></li>
  <li><a href="#problem-5" id="toc-problem-5" class="nav-link" data-scroll-target="#problem-5">Problem 5</a></li>
  <li><a href="#problem-6" id="toc-problem-6" class="nav-link" data-scroll-target="#problem-6">Problem 6</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Discussion 2: Pandas Practice</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>This discussion is all about practicing using <code>pandas</code>, and testing your knowledge about its various functionalities to accomplish small tasks.</p>
<p>We will be using the <code>elections</code> dataset from lecture.</p>
<div id="f26a152e" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># import packages</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>elections <span class="op">=</span> pd.read_csv(<span class="st">'elections.csv'</span>)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>elections.head(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="3">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Year</th>
<th data-quarto-table-cell-role="th">Candidate</th>
<th data-quarto-table-cell-role="th">Party</th>
<th data-quarto-table-cell-role="th">Popular vote</th>
<th data-quarto-table-cell-role="th">Result</th>
<th data-quarto-table-cell-role="th">%</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>1824</td>
<td>Andrew Jackson</td>
<td>Democratic-Republican</td>
<td>151271</td>
<td>loss</td>
<td>57.210122</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>1824</td>
<td>John Quincy Adams</td>
<td>Democratic-Republican</td>
<td>113142</td>
<td>win</td>
<td>42.789878</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>1828</td>
<td>Andrew Jackson</td>
<td>Democratic</td>
<td>642806</td>
<td>win</td>
<td>56.203927</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>1828</td>
<td>John Quincy Adams</td>
<td>National Republican</td>
<td>500897</td>
<td>loss</td>
<td>43.796073</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>1832</td>
<td>Andrew Jackson</td>
<td>Democratic</td>
<td>702735</td>
<td>win</td>
<td>54.574789</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>1832</td>
<td>Henry Clay</td>
<td>National Republican</td>
<td>484205</td>
<td>loss</td>
<td>37.603628</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>1832</td>
<td>William Wirt</td>
<td>Anti-Masonic</td>
<td>100715</td>
<td>loss</td>
<td>7.821583</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>1836</td>
<td>Hugh Lawson White</td>
<td>Whig</td>
<td>146109</td>
<td>loss</td>
<td>10.005985</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>1836</td>
<td>Martin Van Buren</td>
<td>Democratic</td>
<td>763291</td>
<td>win</td>
<td>52.272472</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>1836</td>
<td>William Henry Harrison</td>
<td>Whig</td>
<td>550816</td>
<td>loss</td>
<td>37.721543</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<section id="problem-1" class="level2">
<h2 class="anchored" data-anchor-id="problem-1">Problem 1</h2>
<p>Write a line of code that returns the elections table sorted in descending order by <code>"Popular vote"</code>. Store your result in a variable named <code>sorted</code>. Would calling <code>sorted.iloc[[0], :]</code> give the same result as <code>sorted.loc[[0], :]</code>?</p>
<div id="bcf22ee3-43ec-41f3-992e-8a478ffbd112" class="cell" data-execution_count="4">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Answer</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="bu">sorted</span> <span class="op">=</span> elections.sort_values(<span class="st">"Popular vote"</span>, ascending <span class="op">=</span> <span class="va">False</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="bu">sorted</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="4">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Year</th>
<th data-quarto-table-cell-role="th">Candidate</th>
<th data-quarto-table-cell-role="th">Party</th>
<th data-quarto-table-cell-role="th">Popular vote</th>
<th data-quarto-table-cell-role="th">Result</th>
<th data-quarto-table-cell-role="th">%</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">178</td>
<td>2020</td>
<td>Joseph Biden</td>
<td>Democratic</td>
<td>81268924</td>
<td>win</td>
<td>51.311515</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">182</td>
<td>2024</td>
<td>Donald Trump</td>
<td>Republican</td>
<td>77303568</td>
<td>win</td>
<td>49.808629</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">183</td>
<td>2024</td>
<td>Kamala Harris</td>
<td>Democratic</td>
<td>75019230</td>
<td>loss</td>
<td>48.336772</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">179</td>
<td>2020</td>
<td>Donald Trump</td>
<td>Republican</td>
<td>74216154</td>
<td>loss</td>
<td>46.858542</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">162</td>
<td>2008</td>
<td>Barack Obama</td>
<td>Democratic</td>
<td>69498516</td>
<td>win</td>
<td>53.023510</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">110</td>
<td>1956</td>
<td>T. Coleman Andrews</td>
<td>States' Rights</td>
<td>107929</td>
<td>loss</td>
<td>0.174883</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">141</td>
<td>1992</td>
<td>Bo Gritz</td>
<td>Populist</td>
<td>106152</td>
<td>loss</td>
<td>0.101918</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">99</td>
<td>1948</td>
<td>Claude A. Watson</td>
<td>Prohibition</td>
<td>103708</td>
<td>loss</td>
<td>0.212747</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">89</td>
<td>1932</td>
<td>William Z. Foster</td>
<td>Communist</td>
<td>103307</td>
<td>loss</td>
<td>0.261069</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>1832</td>
<td>William Wirt</td>
<td>Anti-Masonic</td>
<td>100715</td>
<td>loss</td>
<td>7.821583</td>
</tr>
</tbody>
</table>

<p>187 rows × 6 columns</p>
</div>
</div>
</div>
<details>
<summary>
<b>Explanation</b>
</summary>
<br> <span style="color:blue">
<div>
<p>We can sort a <code>DataFrame</code> by a column using the <code>.sort_values()</code> function! Remember to specify <code>ascending = False</code>, or else it will sort in <em>increasing</em> order.</p>
</div>
</span>
</details>
<div id="54fd5752-2583-4327-b0a2-7177d8f7416a" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="bu">sorted</span>.iloc[[<span class="dv">0</span>], :]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="5">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Year</th>
<th data-quarto-table-cell-role="th">Candidate</th>
<th data-quarto-table-cell-role="th">Party</th>
<th data-quarto-table-cell-role="th">Popular vote</th>
<th data-quarto-table-cell-role="th">Result</th>
<th data-quarto-table-cell-role="th">%</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">178</td>
<td>2020</td>
<td>Joseph Biden</td>
<td>Democratic</td>
<td>81268924</td>
<td>win</td>
<td>51.311515</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="0c400590-19b5-41a6-ba1b-d5a564e0bdca" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="bu">sorted</span>.loc[[<span class="dv">0</span>], :]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Year</th>
<th data-quarto-table-cell-role="th">Candidate</th>
<th data-quarto-table-cell-role="th">Party</th>
<th data-quarto-table-cell-role="th">Popular vote</th>
<th data-quarto-table-cell-role="th">Result</th>
<th data-quarto-table-cell-role="th">%</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>1824</td>
<td>Andrew Jackson</td>
<td>Democratic-Republican</td>
<td>151271</td>
<td>loss</td>
<td>57.210122</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<details>
<summary>
<b>Explanation</b>
</summary>
<br> <span style="color:blue">
<div>
<p>The difference is that <code>.loc[]</code> uses <strong>label-based</strong> indexing, while <code>.iloc[]</code> uses <strong>integer position-based</strong> indexing. Using <code>.loc[]</code> will simply grab the row with the label <strong>0</strong> regardless of where it is, while <code>.iloc[]</code> will grab the first row of the sorted <code>DataFrame</code>.</p>
</div>
</span>
</details>
</section>
<section id="problem-2" class="level2">
<h2 class="anchored" data-anchor-id="problem-2">Problem 2</h2>
<p>Using Boolean slicing, write one line of <code>pandas</code> code that returns a <code>DataFrame</code> that only contains election results from the 1900s.</p>
<div id="dad407f0" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Answer</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>elections[(elections[<span class="st">"Year"</span>] <span class="op">&gt;=</span> <span class="dv">1900</span>) <span class="op">&amp;</span> (elections[<span class="st">"Year"</span>] <span class="op">&lt;</span> <span class="dv">2000</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="7">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Year</th>
<th data-quarto-table-cell-role="th">Candidate</th>
<th data-quarto-table-cell-role="th">Party</th>
<th data-quarto-table-cell-role="th">Popular vote</th>
<th data-quarto-table-cell-role="th">Result</th>
<th data-quarto-table-cell-role="th">%</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">54</td>
<td>1900</td>
<td>John G. Woolley</td>
<td>Prohibition</td>
<td>210864</td>
<td>loss</td>
<td>1.526821</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">55</td>
<td>1900</td>
<td>William Jennings Bryan</td>
<td>Democratic</td>
<td>6370932</td>
<td>loss</td>
<td>46.130540</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">56</td>
<td>1900</td>
<td>William McKinley</td>
<td>Republican</td>
<td>7228864</td>
<td>win</td>
<td>52.342640</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">57</td>
<td>1904</td>
<td>Alton B. Parker</td>
<td>Democratic</td>
<td>5083880</td>
<td>loss</td>
<td>37.685116</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">58</td>
<td>1904</td>
<td>Eugene V. Debs</td>
<td>Socialist</td>
<td>402810</td>
<td>loss</td>
<td>2.985897</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">146</td>
<td>1996</td>
<td>Harry Browne</td>
<td>Libertarian</td>
<td>485759</td>
<td>loss</td>
<td>0.505198</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">147</td>
<td>1996</td>
<td>Howard Phillips</td>
<td>Taxpayers</td>
<td>184656</td>
<td>loss</td>
<td>0.192045</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">148</td>
<td>1996</td>
<td>John Hagelin</td>
<td>Natural Law</td>
<td>113670</td>
<td>loss</td>
<td>0.118219</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">149</td>
<td>1996</td>
<td>Ralph Nader</td>
<td>Green</td>
<td>685297</td>
<td>loss</td>
<td>0.712721</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">150</td>
<td>1996</td>
<td>Ross Perot</td>
<td>Reform</td>
<td>8085294</td>
<td>loss</td>
<td>8.408844</td>
</tr>
</tbody>
</table>

<p>97 rows × 6 columns</p>
</div>
</div>
</div>
<details>
<summary>
<b>Explanation</b>
</summary>
<br> <span style="color:blue">
<div>
<p>We can “filter” <code>DataFrame</code>s by using boolean slicing! 1. Construct a boolean <code>Series</code> that is <code>True</code> if a row contains election results from the 1900s, and <code>False</code> otherwise. * We can use the <code>&amp;</code> (and) logical operator! 1900 or after <strong>and</strong> before 2000. 2. Use the boolean <code>Series</code> to slice the <code>DataFrame</code> * <code>df[boolean_array]</code></p>
</div>
</span>
</details>
</section>
<section id="problem-3" class="level2">
<h2 class="anchored" data-anchor-id="problem-3">Problem 3</h2>
<p>Write one line of <code>pandas</code> code that returns a <code>Series</code>, where the index is the <code>"Party"</code>, and the values are how many times that party won an election. Only include parties that have won an election.</p>
<div id="6f5462d6-7f8d-43d5-9775-fce661382209" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Answer</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>elections[elections[<span class="st">"Result"</span>] <span class="op">==</span> <span class="st">"win"</span>][<span class="st">"Party"</span>].value_counts()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<pre><code>Party
Republican               24
Democratic               23
Whig                      2
Democratic-Republican     1
National Union            1
Name: count, dtype: int64</code></pre>
</div>
</div>
<div id="ce4dddd7-03e4-44ec-9b30-d5a55372f97f" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Answer</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>elections[elections[<span class="st">"Result"</span>] <span class="op">==</span> <span class="st">"win"</span>].groupby(<span class="st">"Party"</span>).size()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="9">
<pre><code>Party
Democratic               23
Democratic-Republican     1
National Union            1
Republican               24
Whig                      2
dtype: int64</code></pre>
</div>
</div>
<details>
<summary>
<b>Explanation</b>
</summary>
<br> <span style="color:blue">
<div>
<p>Two parts to this! 1. Filter <code>DataFrame</code> to only include winners. * Use boolean slicing again! Construct a boolean <code>Series</code> that has <code>True</code> if the row contains a winner, and <code>False</code> otherwise * <code>elections[elections["Result"] == "win"]</code> 2. Within filtered <code>DataFrame</code> (let’s call this <code>winners</code>), count the number of times each party won an election. Two ways to do this. * Extract the <strong>Party</strong> column from <code>winners</code>, and call <code>value_counts()</code>. * <code>winners["Party"].value_counts()</code> * Group by the <strong>Party</strong> column, and aggregate by the number of rows in each sub-<code>DataFrame</code>. * <code>winners.groupby("Party").size()</code> * The two methods above return the same thing, <em>except</em> <code>.value_counts()</code> sorts by the values in decreasing order, while <code>.groupby()</code> sort by the index in increasing order!</p>
</div>
</span>
</details>
</section>
<section id="problem-4" class="level2">
<h2 class="anchored" data-anchor-id="problem-4">Problem 4</h2>
<p>Write a line of <code>pandas</code> code that returns a <code>Series</code> whose index is the years and whose values are the number of candidates that participated in those years’ elections.</p>
<div id="037501e2" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Answer</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>elections[<span class="st">"Year"</span>].value_counts().head() <span class="co">#.head() to limit output</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<pre><code>Year
1996    7
1948    6
1976    6
2004    6
2008    6
Name: count, dtype: int64</code></pre>
</div>
</div>
<div id="01bcbb0f-8734-4608-9caa-1f32eac0a7da" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Answer</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>elections.groupby(<span class="st">"Year"</span>).size().head() <span class="co">#.head() to limit output</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="11">
<pre><code>Year
1824    2
1828    2
1832    3
1836    3
1840    2
dtype: int64</code></pre>
</div>
</div>
<details>
<summary>
<b>Explanation</b>
</summary>
<br> <span style="color:blue">
<div>
<p>Very similar to <strong>Problem 3</strong>! Might even be easier, actually. Each row corresponds to one candidate per election cycle, so we simply need to count the number of times each <strong>Year</strong> appears in the elections <code>DataFrame</code>. Just like in <strong>Problem 3</strong>, two ways to do this.</p>
<ol type="1">
<li>Extract the <strong>Year</strong> column as a <code>Series</code>, call <code>.value_counts()</code> on it.
<ul>
<li><code>elections["Year"].value_counts()</code><br>
</li>
</ul></li>
<li>Group by the <strong>Year</strong> column, creating a sub-<code>DataFrame</code> for each unique <strong>Year</strong>. Aggregate by <code>.size()</code>, counting the number of rows in each sub-<code>DataFrame</code>.
<ul>
<li><code>elections.groupby("Year").size()</code></li>
</ul></li>
</ol>
</div>
</span>
</details>
</section>
<section id="problem-5" class="level2">
<h2 class="anchored" data-anchor-id="problem-5">Problem 5</h2>
<p>Write a line of <code>pandas</code> code that creates a filtered <code>DataFrame</code> named <code>filtered_parties</code> from the elections dataset and keeps only the parties that have at least one election % more than 50%.</p>
<div id="e5d0a86c-5fa2-47a3-8bda-3ee1e60e209e" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Answer</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>filtered_parties <span class="op">=</span> elections.groupby(<span class="st">"Party"</span>).<span class="bu">filter</span>(<span class="kw">lambda</span> df: df[<span class="st">"%"</span>].<span class="bu">max</span>() <span class="op">&gt;</span> <span class="dv">50</span>)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>filtered_parties</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Year</th>
<th data-quarto-table-cell-role="th">Candidate</th>
<th data-quarto-table-cell-role="th">Party</th>
<th data-quarto-table-cell-role="th">Popular vote</th>
<th data-quarto-table-cell-role="th">Result</th>
<th data-quarto-table-cell-role="th">%</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>1824</td>
<td>Andrew Jackson</td>
<td>Democratic-Republican</td>
<td>151271</td>
<td>loss</td>
<td>57.210122</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>1824</td>
<td>John Quincy Adams</td>
<td>Democratic-Republican</td>
<td>113142</td>
<td>win</td>
<td>42.789878</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>1828</td>
<td>Andrew Jackson</td>
<td>Democratic</td>
<td>642806</td>
<td>win</td>
<td>56.203927</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>1832</td>
<td>Andrew Jackson</td>
<td>Democratic</td>
<td>702735</td>
<td>win</td>
<td>54.574789</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">7</td>
<td>1836</td>
<td>Hugh Lawson White</td>
<td>Whig</td>
<td>146109</td>
<td>loss</td>
<td>10.005985</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">176</td>
<td>2016</td>
<td>Hillary Clinton</td>
<td>Democratic</td>
<td>65853514</td>
<td>loss</td>
<td>48.521539</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">178</td>
<td>2020</td>
<td>Joseph Biden</td>
<td>Democratic</td>
<td>81268924</td>
<td>win</td>
<td>51.311515</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">179</td>
<td>2020</td>
<td>Donald Trump</td>
<td>Republican</td>
<td>74216154</td>
<td>loss</td>
<td>46.858542</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">182</td>
<td>2024</td>
<td>Donald Trump</td>
<td>Republican</td>
<td>77303568</td>
<td>win</td>
<td>49.808629</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">183</td>
<td>2024</td>
<td>Kamala Harris</td>
<td>Democratic</td>
<td>75019230</td>
<td>loss</td>
<td>48.336772</td>
</tr>
</tbody>
</table>

<p>99 rows × 6 columns</p>
</div>
</div>
</div>
<details>
<summary>
<b>Explanation</b>
</summary>
<br> <span style="color:blue">
<div>
<p>This filtering is different from boolean slicing! Boolean slicing considers rows individually, while <code>.filter()</code> considers <em>groups of rows</em>. Rows of a sub-<code>DataFrame</code> either <em>all</em> make it, or <em>none</em> make it.</p>
<ol type="1">
<li>Group by the <strong>Party</strong> column, creating one sub-<code>DataFrame</code> for each party.
<ul>
<li><code>elections.groupby("Party")</code></li>
</ul></li>
<li>Filter using <code>.filter()</code>
<ul>
<li>Pass in a function into <code>.filter()</code> that takes in a <code>DataFrame</code> and returns <code>True</code> or <code>False</code>. Can be a lambda function!</li>
<li><code>.filter(lambda df: df["%"].max() &gt; 50)</code>
<ul>
<li>If the lambda function returns <code>True</code>, it means you keep the entire sub-<code>DataFrame</code>. <code>False</code> means you exclude it entirely!</li>
</ul></li>
</ul></li>
</ol>
</div>
</span>
</details>
</section>
<section id="problem-6" class="level2">
<h2 class="anchored" data-anchor-id="problem-6">Problem 6</h2>
<p>Write a line of <code>pandas</code> code that uses the <code>filtered_parties</code> <code>DataFrame</code> to return a new <code>DataFrame</code> with row indices that correspond to the year and columns that correspond to each party. Each entry should be the total percentage of votes for all the candidates that ran during that particular year for the specified party. Missing values from the dataset (the cases where a party did not have a candidate in a particular year) should be entered as 0. Below is an example.</p>
<p><img src="pivot.png" class="img-fluid"></p>
<div id="d63728c8-4f44-4eff-9f03-92a40251cffc" class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>elections_pivot <span class="op">=</span> filtered_parties.pivot_table(</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>    index <span class="op">=</span> <span class="st">"Year"</span>,</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>    columns <span class="op">=</span> <span class="st">"Party"</span>,</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>    values <span class="op">=</span> <span class="st">"%"</span>,</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    aggfunc <span class="op">=</span> np.<span class="bu">sum</span>,</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    fill_value <span class="op">=</span> <span class="dv">0</span>)</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>elections_pivot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>C:\Users\conan\AppData\Local\Temp\ipykernel_16672\3251603173.py:1: FutureWarning: The provided callable &lt;function sum at 0x000001D1EE547B00&gt; is currently using DataFrameGroupBy.sum. In a future version of pandas, the provided callable will be used directly. To keep current behavior pass the string "sum" instead.
  elections_pivot = filtered_parties.pivot_table(</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="13">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th">Party</th>
<th data-quarto-table-cell-role="th">Democratic</th>
<th data-quarto-table-cell-role="th">Democratic-Republican</th>
<th data-quarto-table-cell-role="th">National Union</th>
<th data-quarto-table-cell-role="th">Republican</th>
<th data-quarto-table-cell-role="th">Whig</th>
</tr>
<tr class="even">
<th data-quarto-table-cell-role="th">Year</th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">1824</td>
<td>0.000000</td>
<td>100.0</td>
<td>0.000000</td>
<td>0.000000</td>
<td>0.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1828</td>
<td>56.203927</td>
<td>0.0</td>
<td>0.000000</td>
<td>0.000000</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1832</td>
<td>54.574789</td>
<td>0.0</td>
<td>0.000000</td>
<td>0.000000</td>
<td>0.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1836</td>
<td>52.272472</td>
<td>0.0</td>
<td>0.000000</td>
<td>0.000000</td>
<td>47.727528</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1840</td>
<td>46.948787</td>
<td>0.0</td>
<td>0.000000</td>
<td>0.000000</td>
<td>53.051213</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1844</td>
<td>50.749477</td>
<td>0.0</td>
<td>0.000000</td>
<td>0.000000</td>
<td>49.250523</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1848</td>
<td>42.552229</td>
<td>0.0</td>
<td>0.000000</td>
<td>0.000000</td>
<td>47.309296</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1852</td>
<td>51.013168</td>
<td>0.0</td>
<td>0.000000</td>
<td>0.000000</td>
<td>44.056548</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1856</td>
<td>45.306080</td>
<td>0.0</td>
<td>0.000000</td>
<td>33.139919</td>
<td>0.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1860</td>
<td>0.000000</td>
<td>0.0</td>
<td>0.000000</td>
<td>39.699408</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1864</td>
<td>45.048488</td>
<td>0.0</td>
<td>54.951512</td>
<td>0.000000</td>
<td>0.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1868</td>
<td>47.334695</td>
<td>0.0</td>
<td>0.000000</td>
<td>52.665305</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1872</td>
<td>0.000000</td>
<td>0.0</td>
<td>0.000000</td>
<td>55.928594</td>
<td>0.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1876</td>
<td>51.528376</td>
<td>0.0</td>
<td>0.000000</td>
<td>48.471624</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1880</td>
<td>48.278422</td>
<td>0.0</td>
<td>0.000000</td>
<td>48.369234</td>
<td>0.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1884</td>
<td>48.884933</td>
<td>0.0</td>
<td>0.000000</td>
<td>48.312208</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1888</td>
<td>48.656799</td>
<td>0.0</td>
<td>0.000000</td>
<td>47.858041</td>
<td>0.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1892</td>
<td>46.121393</td>
<td>0.0</td>
<td>0.000000</td>
<td>42.984101</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1896</td>
<td>46.871053</td>
<td>0.0</td>
<td>0.000000</td>
<td>51.213817</td>
<td>0.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1900</td>
<td>46.130540</td>
<td>0.0</td>
<td>0.000000</td>
<td>52.342640</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1904</td>
<td>37.685116</td>
<td>0.0</td>
<td>0.000000</td>
<td>56.562787</td>
<td>0.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1908</td>
<td>43.414640</td>
<td>0.0</td>
<td>0.000000</td>
<td>52.013300</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1912</td>
<td>41.933422</td>
<td>0.0</td>
<td>0.000000</td>
<td>23.218466</td>
<td>0.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1916</td>
<td>49.367987</td>
<td>0.0</td>
<td>0.000000</td>
<td>46.240779</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1920</td>
<td>34.293063</td>
<td>0.0</td>
<td>0.000000</td>
<td>60.574501</td>
<td>0.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1924</td>
<td>28.976291</td>
<td>0.0</td>
<td>0.000000</td>
<td>54.329113</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1928</td>
<td>40.902853</td>
<td>0.0</td>
<td>0.000000</td>
<td>58.368524</td>
<td>0.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1932</td>
<td>57.672125</td>
<td>0.0</td>
<td>0.000000</td>
<td>39.830594</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1936</td>
<td>60.978107</td>
<td>0.0</td>
<td>0.000000</td>
<td>36.648285</td>
<td>0.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1940</td>
<td>54.871202</td>
<td>0.0</td>
<td>0.000000</td>
<td>44.894561</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1944</td>
<td>53.773801</td>
<td>0.0</td>
<td>0.000000</td>
<td>46.226199</td>
<td>0.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1948</td>
<td>49.601536</td>
<td>0.0</td>
<td>0.000000</td>
<td>45.112958</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1952</td>
<td>44.446312</td>
<td>0.0</td>
<td>0.000000</td>
<td>55.325173</td>
<td>0.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1956</td>
<td>42.174464</td>
<td>0.0</td>
<td>0.000000</td>
<td>57.650654</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1960</td>
<td>50.082561</td>
<td>0.0</td>
<td>0.000000</td>
<td>49.917439</td>
<td>0.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1964</td>
<td>61.344703</td>
<td>0.0</td>
<td>0.000000</td>
<td>38.655297</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1968</td>
<td>42.863537</td>
<td>0.0</td>
<td>0.000000</td>
<td>43.565246</td>
<td>0.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1972</td>
<td>37.670670</td>
<td>0.0</td>
<td>0.000000</td>
<td>60.907806</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1976</td>
<td>50.271900</td>
<td>0.0</td>
<td>0.000000</td>
<td>48.199499</td>
<td>0.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1980</td>
<td>41.132848</td>
<td>0.0</td>
<td>0.000000</td>
<td>50.897944</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1984</td>
<td>40.729429</td>
<td>0.0</td>
<td>0.000000</td>
<td>59.023326</td>
<td>0.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1988</td>
<td>45.770691</td>
<td>0.0</td>
<td>0.000000</td>
<td>53.518845</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">1992</td>
<td>43.118485</td>
<td>0.0</td>
<td>0.000000</td>
<td>37.544784</td>
<td>0.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1996</td>
<td>49.296938</td>
<td>0.0</td>
<td>0.000000</td>
<td>40.766036</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2000</td>
<td>48.491813</td>
<td>0.0</td>
<td>0.000000</td>
<td>47.974666</td>
<td>0.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2004</td>
<td>48.306775</td>
<td>0.0</td>
<td>0.000000</td>
<td>50.771824</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2008</td>
<td>53.023510</td>
<td>0.0</td>
<td>0.000000</td>
<td>45.737243</td>
<td>0.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2012</td>
<td>51.258484</td>
<td>0.0</td>
<td>0.000000</td>
<td>47.384076</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2016</td>
<td>48.521539</td>
<td>0.0</td>
<td>0.000000</td>
<td>46.407862</td>
<td>0.000000</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">2020</td>
<td>51.311515</td>
<td>0.0</td>
<td>0.000000</td>
<td>46.858542</td>
<td>0.000000</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2024</td>
<td>48.336772</td>
<td>0.0</td>
<td>0.000000</td>
<td>49.808629</td>
<td>0.000000</td>
</tr>
</tbody>
</table>

</div>
</div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg ansi-bold">The Kernel crashed while executing code in the current cell or a previous cell. 

</span><span class="ansi-red-fg ansi-bold">Please review the code in the cell(s) to identify a possible cause of the failure. 

</span><span class="ansi-red-fg ansi-bold">Click &lt;a href='https://aka.ms/vscodeJupyterKernelCrash'&gt;here&lt;/a&gt; for more info. 

</span><span class="ansi-red-fg ansi-bold">View Jupyter &lt;a href='command:jupyter.viewOutput'&gt;log&lt;/a&gt; for further details.</span></pre>
</div>
</div>
</div>
<details>
<summary>
<b>Explanation</b>
</summary>
<br> <span style="color:blue">
<div>
<p>First thing to notice is that the columns are values of the <strong>Party</strong> column! This tells us that what we see is a <strong>pivot table</strong>.</p>
<ul>
<li>Use the <code>.pivot_table()</code> function on <code>filtered_parties</code>
<ul>
<li><code>index = "Year"</code> and <code>columns = "Party"</code>, saying that the unique values of <strong>Year</strong> should make up the row indices, and the unique values of <strong>Party</strong> should make up the columns.</li>
<li><code>values = "%"</code> indicates that we populate the cells with the <strong>%</strong> values for each combination of <strong>Year, Party</strong></li>
<li><code>aggfunc = np.sum</code> describes how to aggregate the values in a cell</li>
<li><code>fill_value = 0</code> says to impute 0 in case there is no <strong>%</strong> value for a specific <strong>Year, Party</strong> combination</li>
</ul></li>
</ul>
</div>
</span>
</details>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>